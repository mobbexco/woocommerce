(()=>{"use strict";var t={20:(t,e,o)=>{var r=o(609),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,o){var r,n={},c=null,d=null;for(r in void 0!==o&&(c=""+o),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(d=e.ref),e)i.call(e,r)&&!l.hasOwnProperty(r)&&(n[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===n[r]&&(n[r]=e[r]);return{$$typeof:a,type:t,key:c,ref:d,props:n,_owner:s.current}}e.Fragment=n,e.jsx=c,e.jsxs=c},848:(t,e,o)=>{t.exports=o(20)},609:t=>{t.exports=window.React}},e={};function o(r){var a=e[r];if(void 0!==a)return a.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,o),n.exports}var r=o(609),a=o(848);function n({handleParentVariable:t}){const[e,o]=(0,r.useState)(!1);return(0,a.jsx)("button",{onClick:()=>{o((t=>!t)),t()},className:"bg-mobbexWhite text-black font-sans py-2 px-4 rounded-xl shadow border border-solid w-full hover:bg-black hover:text-mobbexWhite",children:e?"Mostrar menos":"Ver Financiación"})}function i({sources:t,selectedCard:e,onSelectCard:o,theme:r}){const n=t.filter((t=>"card"===t.view.group)).map((t=>t.source.name));return(0,a.jsxs)("div",{className:"mt-4 ",children:[(0,a.jsx)("label",{className:("light"===r?"":"text-mobbexWhite")+" block text-black text-base font-sans font-medium mb-2",children:"Selecciona la tarjeta:"}),(0,a.jsxs)("select",{value:e,onChange:t=>{const e=t.target.value;o(e)},className:"p-2 bg-mobbexWhite text-black text-sm font-sans rounded-lg shadow w-full",children:[(0,a.jsx)("option",{value:"",children:"Selecciona una tarjeta"}),n.map((t=>(0,a.jsx)("option",{value:t,children:t},t)))]})]})}function s({sources:t,selectedInstallment:e,selectedCard:o,onSelectInstallment:r,theme:n}){const i=t.filter((t=>t.source.name===o)).map((t=>{var e;return t.installments.enabled?null==(e=t.installments.list)?void 0:e.map((t=>t.name)):[t.view.subgroup_title]})).flat();return(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:("light"===n?"":"text-mobbexWhite")+" block text-black text-base font-sans font-medium mb-2",children:"Selecciona el método de pago:"}),(0,a.jsxs)("select",{value:e,disabled:!o,onChange:t=>{const e=t.target.value;r(e)},className:"p-2 bg-mobbexWhite text-black text-sm font-sans rounded-lg shadow w-full",children:[(0,a.jsx)("option",{value:"",children:"Selecciona un método de pago"}),i.map(((t,e)=>(0,a.jsx)("option",{value:t,children:t},e)))]})]})}function l({sources:t,selectedCard:e,selectedInstallment:o,theme:n}){const[i,s]=(0,r.useState)(null),[l,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const r=t.filter((t=>t.source.name===e)).flatMap((t=>t.installments.list||[])).find((t=>t.name===o));if(r){s(r);const t=!(a=r.tags)||a.length<1?{}:a.reduce(((t,e)=>(t[e.label]=e.value,console.log("formatTags OTags",t),t)),{});c(t)}else console.log("No data found for the selected card and installment.");var a}),[e,o]),i&&(0,a.jsx)("div",{className:("light"===n?"":"text-mobbexWhite")+" font-sans border-t-2 border-solid border-mobbexGrey-Medium mt-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[(0,a.jsxs)("div",{className:"col-start-1 font-bold",children:[(0,a.jsx)("p",{children:e}),(0,a.jsxs)("p",{className:"text-xl",children:[i.count," Cuotas de $",i.totals.installment.amount]})]}),(0,a.jsxs)("p",{className:"col-start-2 font-bold text-end",children:["Total: $",i.totals.total]}),(0,a.jsx)("div",{className:"col-start-1 text-sm "+("light"===n?"text-mobbexTag-Light":"text-mobbexTag-Dark"),children:(0,a.jsxs)("div",{className:"col-start-1 text-sm",children:[(0,a.jsxs)("p",{children:["CFT: ",null!=l&&l.CFT?l.CFT:"0","%"]}),(0,a.jsxs)("p",{children:["TNA: ",null!=l&&l.TNA?l.TNA:"0","% TEA:"," ",null!=l&&l.TEA?l.TEA:"0","%"]})]})})]})})}function c({installment:t,theme:e}){return(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{children:(0,a.jsx)("strong",{children:t.count})}),t.count>1?" cuotas ":" pago ",(0,a.jsx)("span",{className:("light"===e?"":"bg-mobbexGrey-Dark")+" text-mobbexGreen-light",children:t.percentage<1?t.percentage<0?"con descuento":"sin interés":""})," de ",(0,a.jsxs)("strong",{children:["$",t.amount]}),":",t.sources.map((t=>(0,a.jsx)("span",{children:(0,a.jsx)("img",{src:`https://res.mobbex.com/images/sources/original/${t}.png`,alt:"Card logo",className:"inline-block rounded-[0.70rem] ml-2 w-10 h-8 object-contain"})},t)))]})})}function d({bestInstallments:t,theme:e}){return(0,a.jsx)("div",{className:("light"===e?"":"text-white")+' grid justify-center items-center font-sans text-left w-auto px-6"',children:t.map((t=>(0,a.jsx)(c,{installment:t,theme:e},t.uid)))})}function m({sources:t,theme:e}){const[o,c]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),[b,u]=(0,r.useState)(""),w=function(t){const e=[];try{if(!t.length)return e;const o=t.map((t=>{var e;return(null==(e=null==t?void 0:t.installments)?void 0:e.list)||[]})).flat();if(!o.length)return e;for(let r=0;r<2;r++){let r={totals:{financial:{percentage:1e4}}};(o??[]).map((t=>{var e,o,a,n;const i=null==(o=null==(e=null==t?void 0:t.totals)?void 0:e.financial)?void 0:o.percentage,s=null==(n=null==(a=null==r?void 0:r.totals)?void 0:a.financial)?void 0:n.percentage;(i<s||i==s&&(null==t?void 0:t.count)>r.count)&&(r={...t})}));const a=t.filter((t=>{var e;return(null==(e=t.installments)?void 0:e.list)&&t.installments.list.some((t=>t.uid===r.uid))})).map((t=>t.source.reference));e.push({amount:Number(r.totals.installment.amount),count:Number(r.count),percentage:Number(r.totals.financial.percentage),sources:a,uid:r.uid}),o.map(((t,e)=>{t.uid==r.uid&&o.splice(e,1)}))}}catch(t){console.log(t)}return e}(t);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:("light"===e?"bg-mobbexGrey-Soft":"bg-mobbexGrey-Dark")+" shadow-md rounded-lg px-8 pt-6 pb-6 m-2 w-auto",children:[(0,a.jsx)(d,{bestInstallments:w,theme:e}),(0,a.jsx)("div",{className:"text-center mt-4 max-w-sm mx-auto",children:(0,a.jsx)(n,{handleParentVariable:()=>{c((t=>!t))}})}),o&&(0,a.jsxs)("form",{className:"max-w-sm mx-auto",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i,{sources:t,selectedCard:m,onSelectCard:p,theme:e}),(0,a.jsx)(s,{sources:t,selectedInstallment:b,selectedCard:m,onSelectInstallment:u,theme:e})]},"selectInstallment"),b&&(0,a.jsx)("div",{children:(0,a.jsx)(l,{sources:t,selectedCard:m,selectedInstallment:b,theme:e})},"installmentDetail")]})]})})}!function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode('*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.col-start-1{grid-column-start:1}.col-start-2{grid-column-start:2}.m-2{margin:.5rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mt-1{margin-top:.25rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.inline-block{display:inline-block}.grid{display:grid}.hidden{display:none}.h-8{height:2rem}.w-10{width:2.5rem}.w-auto{width:auto}.w-full{width:100%}.max-w-sm{max-width:24rem}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:.5rem}.rounded-\\[0\\.70rem\\]{border-radius:.7rem}.rounded-lg{border-radius:.5rem}.rounded-xl{border-radius:.75rem}.border{border-width:1px}.border-t-2{border-top-width:2px}.border-solid{border-style:solid}.border-mobbexGrey-Medium{--tw-border-opacity: 1;border-color:rgb(209 218 230 / var(--tw-border-opacity, 1))}.bg-mobbexGrey-Dark{--tw-bg-opacity: 1;background-color:rgb(43 42 42 / var(--tw-bg-opacity, 1))}.bg-mobbexGrey-Soft{--tw-bg-opacity: 1;background-color:rgb(226 226 225 / var(--tw-bg-opacity, 1))}.bg-mobbexWhite{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.object-contain{object-fit:contain}.p-2{padding:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.pb-6{padding-bottom:1.5rem}.pt-6{padding-top:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-end{text-align:end}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-base{font-size:1rem;line-height:1.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-mobbexGreen-light{--tw-text-opacity: 1;color:rgb(10 138 74 / var(--tw-text-opacity, 1))}.text-mobbexTag-Dark{--tw-text-opacity: 1;color:rgb(181 181 181 / var(--tw-text-opacity, 1))}.text-mobbexTag-Light{--tw-text-opacity: 1;color:rgb(106 105 105 / var(--tw-text-opacity, 1))}.text-mobbexWhite,.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:bg-black:hover{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.hover\\:text-mobbexWhite:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}')),document.head.appendChild(t)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}}(),function(t,e){const{createRoot:o}=t.ReactDOM;function a({$:t}){const[e,o]=(0,r.useState)([]),[a,n]=(0,r.useState)(0),i=(e,r,a=!0)=>{n(!1),t.ajax({dataType:"json",method:"POST",url:mobbexWidget.updateUrl,data:{id:r,price:e,child:a},success:t=>{n(!0),o(JSON.parse(t))},error:t=>{console.log(t)}})};return(0,r.useEffect)((()=>{t.ajax({dataType:"json",method:"POST",url:mobbexWidget.sourcesUrl,data:{ids:mobbexWidget.product_ids,price:mobbexWidget.price},success:t=>{o(JSON.parse(t)),n(!0)},error:t=>{console.log(t)}}),t(document).on("found_variation","form.cart",(function(t,e){i(e.display_price,e.variation_id)})),t(document).on("wc-composite-component-loaded","form.cart",((t,e)=>{let o=e.composite.composite_price_view.model.attributes.totals.price;i(o,e.composite.composite_id,!1)}))}),[]),(0,r.createElement)(m,{sources:e,theme:mobbexWidget.theme,ready:a})}e(document).ready(async function(){let t=0;do{await new Promise((t=>setTimeout(t,100))),t++}while(!document.querySelector("#mbbxFinanceWidget")||t<50);const n=document.querySelector("#mbbxFinanceWidget");if(!n)return console.error("Mobbex widget container not found");o(n).render((0,r.createElement)(a,{$:e}))}())}(window,jQuery)})();
(()=>{"use strict";var e={20:(e,t,o)=>{var r=o(609),a=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,o){var r,n={},c=null,d=null;for(r in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===n[r]&&(n[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:n,_owner:s.current}}t.Fragment=n,t.jsx=c,t.jsxs=c},848:(e,t,o)=>{e.exports=o(20)},609:e=>{e.exports=window.React}},t={};function o(r){var a=t[r];if(void 0!==a)return a.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}var r=o(609);const a=({id:e,value:t,text:o})=>(0,r.createElement)("option",{id:e,value:t},o);function n({sources:e,setSelectedGroup:t}){return(0,r.createElement)("select",{className:"mbbx-method-select",name:"mbbx-method-select",id:"mbbx-method-select",onChange:e=>{t(e.target.value)}},(0,r.createElement)(a,{id:"0",text:"Seleccione un método de pago",value:"0"}),e.map(((e,t)=>e.source.name&&e.installments.enabled&&(0,r.createElement)(a,{id:t+"-"+e.source.reference,value:e.source.reference,text:e.source.name}))))}const i=({name:e,count:t,price:o,amount:a,description:n,tags:i})=>(0,r.createElement)("tr",null,(0,r.createElement)("td",null,e,(0,r.createElement)("small",{style:{fontWeight:"bold"}},n),i&&i.map((e=>(0,r.createElement)("small",null,`${e.label}: ${e.value}`)))),(0,r.createElement)("td",{style:{textAlign:"right"}},o?`$${o}`:"",1!=t&&(0,r.createElement)("small",null,t," cuotas de $",a))),s=({installments:e})=>(0,r.createElement)("table",{className:"mbbx-plan-table"},(0,r.createElement)("tbody",null,e.map((e=>(0,r.createElement)(i,{name:e.name,count:e.totals.installment.count,price:e.totals.total,amount:e.totals.installment.amount,description:e.description,tags:e.tags})))));function l({source:e,i:t}){return(0,r.createElement)("div",{id:t+"+"+e.source.reference,className:"mbbx-plan-card"},(0,r.createElement)("p",{className:"mbbx-payment-method"},(0,r.createElement)("img",{src:`https://res.mobbex.com/images/sources/jpg/${e.source.reference}.jpg`}),e.source.name),e.installments.list&&(0,r.createElement)(s,{installments:e.installments.list}),!e.installments.enabled&&(0,r.createElement)("table",{className:"mbbx-plan-table"},(0,r.createElement)("tbody",null,(0,r.createElement)(i,{name:e.view.subgroup_title,count:1,price:null,amount:"",description:""}))))}function c({sources:e,logo:t,text:o,theme:a,disable:i}){const[s,c]=(0,r.useState)(!1),[d,m]=(0,r.useState)("0"),u=()=>c(!s);return document.getElementById("mbbxFinanceWidget").addEventListener("click",(e=>{u()})),(0,r.createElement)(r.Fragment,null,s&&(0,r.createElement)("div",{className:a},(0,r.createElement)("div",{id:"mbbxProductModal"},(0,r.createElement)("div",{id:"mbbx-installments-widget",className:a},(0,r.createElement)("div",{className:"mbbx-installment-widget-header",id:"mbbx-installment-widget-header"},(0,r.createElement)(n,{sources:e,setSelectedGroup:m}),(0,r.createElement)("button",{onClick:u},"X")),(0,r.createElement)("div",{id:"mbbxProductModalBody"},e.map(((e,t)=>e.source.name&&(e.source.reference===d||"0"===d)&&(0,r.createElement)(l,{source:e,i:t}))))))),(0,r.createElement)("button",{disabled:i,onClick:u,className:"mbbx-button",id:"mbbxProductBtn"},t&&(0,r.createElement)("img",{src:t}),o))}var d=o(848);function m({handleParentVariable:e}){const[t,o]=(0,r.useState)(!1);return(0,d.jsx)("button",{onClick:()=>{o((e=>!e)),e()},className:"bg-mobbexWhite text-black font-sans py-2 px-4 rounded-xl shadow border border-solid w-full hover:bg-black hover:text-mobbexWhite",children:t?"Mostrar menos":"Ver Financiación"})}function u({sources:e,selectedCard:t,onSelectCard:o,theme:r}){const a=e.filter((e=>"card"===e.view.group)).map((e=>e.source.name));return(0,d.jsxs)("div",{className:"mt-4 ",children:[(0,d.jsx)("label",{className:("light"===r?"":"text-mobbexWhite")+" block text-black text-base font-sans font-medium mb-2",children:"Selecciona la tarjeta:"}),(0,d.jsxs)("select",{value:t,onChange:e=>{const t=e.target.value;o(t)},className:"p-2 bg-mobbexWhite text-black text-sm font-sans rounded-lg shadow w-full",children:[(0,d.jsx)("option",{value:"",children:"Selecciona una tarjeta"}),a.map((e=>(0,d.jsx)("option",{value:e,children:e},e)))]})]})}function b({sources:e,selectedInstallment:t,selectedCard:o,onSelectInstallment:r,theme:a}){const n=e.filter((e=>e.source.name===o)).map((e=>{var t;return e.installments.enabled?null==(t=e.installments.list)?void 0:t.map((e=>e.name)):[e.view.subgroup_title]})).flat();return(0,d.jsxs)("div",{className:"mt-4",children:[(0,d.jsx)("label",{className:("light"===a?"":"text-mobbexWhite")+" block text-black text-base font-sans font-medium mb-2",children:"Selecciona el método de pago:"}),(0,d.jsxs)("select",{value:t,disabled:!o,onChange:e=>{const t=e.target.value;r(t)},className:"p-2 bg-mobbexWhite text-black text-sm font-sans rounded-lg shadow w-full",children:[(0,d.jsx)("option",{value:"",children:"Selecciona un método de pago"}),n.map(((e,t)=>(0,d.jsx)("option",{value:e,children:e},t)))]})]})}function p({sources:e,selectedCard:t,selectedInstallment:o,theme:a}){const[n,i]=(0,r.useState)(null),[s,l]=(0,r.useState)(null);return(0,r.useEffect)((()=>{const r=e.filter((e=>e.source.name===t)).flatMap((e=>e.installments.list||[])).find((e=>e.name===o));if(r){i(r);const e=!(a=r.tags)||a.length<1?{}:a.reduce(((e,t)=>(e[t.label]=t.value,console.log("formatTags OTags",e),e)),{});l(e)}else console.log("No data found for the selected card and installment.");var a}),[t,o]),n&&(0,d.jsx)("div",{className:("light"===a?"":"text-mobbexWhite")+" font-sans border-t-2 border-solid border-mobbexGrey-Medium mt-6",children:(0,d.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[(0,d.jsxs)("div",{className:"col-start-1 font-bold",children:[(0,d.jsx)("p",{children:t}),(0,d.jsxs)("p",{className:"text-xl",children:[n.count," Cuotas de $",n.totals.installment.amount]})]}),(0,d.jsxs)("p",{className:"col-start-2 font-bold text-end",children:["Total: $",n.totals.total]}),(0,d.jsx)("div",{className:"col-start-1 text-sm "+("light"===a?"text-mobbexTag-Light":"text-mobbexTag-Dark"),children:(0,d.jsxs)("div",{className:"col-start-1 text-sm",children:[(0,d.jsxs)("p",{children:["CFT: ",null!=s&&s.CFT?s.CFT:"0","%"]}),(0,d.jsxs)("p",{children:["TNA: ",null!=s&&s.TNA?s.TNA:"0","% TEA:"," ",null!=s&&s.TEA?s.TEA:"0","%"]})]})})]})})}function g({installment:e,theme:t}){return(0,d.jsx)("div",{className:"mb-4",children:(0,d.jsxs)("p",{children:[(0,d.jsx)("span",{children:(0,d.jsx)("strong",{children:e.count})}),e.count>1?" cuotas ":" pago ",(0,d.jsx)("span",{className:("light"===t?"":"bg-mobbexGrey-Dark")+" text-mobbexGreen-light",children:e.percentage<1?e.percentage<0?"con descuento":"sin interés":""})," de ",(0,d.jsxs)("strong",{children:["$",e.amount]}),":",e.sources.map((e=>(0,d.jsx)("span",{children:(0,d.jsx)("img",{src:`https://res.mobbex.com/images/sources/original/${e}.png`,alt:"Card logo",className:"inline-block rounded-[0.70rem] ml-2 w-10 h-8 object-contain"})},e)))]})})}function w({bestInstallments:e,theme:t}){return(0,d.jsx)("div",{className:("light"===t?"":"text-white")+' grid justify-center items-center font-sans text-left w-auto px-6"',children:e.map((e=>(0,d.jsx)(g,{installment:e,theme:t},e.uid)))})}function h({sources:e,theme:t}){const[o,a]=(0,r.useState)(!1),[n,i]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),c=function(e){const t=[];try{if(!e.length)return t;const o=e.map((e=>{var t;return(null==(t=null==e?void 0:e.installments)?void 0:t.list)||[]})).flat();if(!o.length)return t;for(let r=0;r<2;r++){let r={totals:{financial:{percentage:1e4}}};(o??[]).map((e=>{var t,o,a,n;const i=null==(o=null==(t=null==e?void 0:e.totals)?void 0:t.financial)?void 0:o.percentage,s=null==(n=null==(a=null==r?void 0:r.totals)?void 0:a.financial)?void 0:n.percentage;(i<s||i==s&&(null==e?void 0:e.count)>r.count)&&(r={...e})}));const a=e.filter((e=>{var t;return(null==(t=e.installments)?void 0:t.list)&&e.installments.list.some((e=>e.uid===r.uid))})).map((e=>e.source.reference));t.push({amount:Number(r.totals.installment.amount),count:Number(r.count),percentage:Number(r.totals.financial.percentage),sources:a,uid:r.uid}),o.map(((e,t)=>{e.uid==r.uid&&o.splice(t,1)}))}}catch(e){console.log(e)}return t}(e);return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:("light"===t?"bg-mobbexGrey-Soft":"bg-mobbexGrey-Dark")+" shadow-md rounded-lg px-8 pt-6 pb-6 m-2 w-auto",children:[(0,d.jsx)(w,{bestInstallments:c,theme:t}),(0,d.jsx)("div",{className:"text-center mt-4 max-w-sm mx-auto",children:(0,d.jsx)(m,{handleParentVariable:()=>{a((e=>!e))}})}),o&&(0,d.jsxs)("form",{className:"max-w-sm mx-auto",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)(u,{sources:e,selectedCard:n,onSelectCard:i,theme:t}),(0,d.jsx)(b,{sources:e,selectedInstallment:s,selectedCard:n,onSelectInstallment:l,theme:t})]},"selectInstallment"),s&&(0,d.jsx)("div",{children:(0,d.jsx)(p,{sources:e,selectedCard:n,selectedInstallment:s,theme:t})},"installmentDetail")]})]})})}!function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:currentColor}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.col-start-1{grid-column-start:1}.col-start-2{grid-column-start:2}.m-2{margin:.5rem}.mx-auto{margin-left:auto;margin-right:auto}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mt-1{margin-top:.25rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.block{display:block}.inline-block{display:inline-block}.grid{display:grid}.hidden{display:none}.h-8{height:2rem}.w-10{width:2.5rem}.w-auto{width:auto}.w-full{width:100%}.max-w-sm{max-width:24rem}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:.5rem}.rounded-\\[0\\.70rem\\]{border-radius:.7rem}.rounded-lg{border-radius:.5rem}.rounded-xl{border-radius:.75rem}.border{border-width:1px}.border-t-2{border-top-width:2px}.border-solid{border-style:solid}.border-mobbexGrey-Medium{--tw-border-opacity: 1;border-color:rgb(209 218 230 / var(--tw-border-opacity, 1))}.bg-mobbexGrey-Dark{--tw-bg-opacity: 1;background-color:rgb(43 42 42 / var(--tw-bg-opacity, 1))}.bg-mobbexGrey-Soft{--tw-bg-opacity: 1;background-color:rgb(226 226 225 / var(--tw-bg-opacity, 1))}.bg-mobbexWhite{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.object-contain{object-fit:contain}.p-2{padding:.5rem}.px-4{padding-left:1rem;padding-right:1rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.pb-6{padding-bottom:1.5rem}.pt-6{padding-top:1.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-end{text-align:end}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-base{font-size:1rem;line-height:1.5rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.text-black{--tw-text-opacity: 1;color:rgb(0 0 0 / var(--tw-text-opacity, 1))}.text-mobbexGreen-light{--tw-text-opacity: 1;color:rgb(10 138 74 / var(--tw-text-opacity, 1))}.text-mobbexTag-Dark{--tw-text-opacity: 1;color:rgb(181 181 181 / var(--tw-text-opacity, 1))}.text-mobbexTag-Light{--tw-text-opacity: 1;color:rgb(106 105 105 / var(--tw-text-opacity, 1))}.text-mobbexWhite,.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.hover\\:bg-black:hover{--tw-bg-opacity: 1;background-color:rgb(0 0 0 / var(--tw-bg-opacity, 1))}.hover\\:text-mobbexWhite:hover{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}')),document.head.appendChild(e)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}}(),function(e,t){const{createRoot:o}=e.ReactDOM;function a({$:e}){const[t,o]=(0,r.useState)([]),[a,n]=(0,r.useState)(0),i=(t,r,a=!0)=>{n(!1),e.ajax({dataType:"json",method:"POST",url:mobbexWidget.updateUrl,data:{id:r,price:t,child:a},success:e=>{n(!0),o(JSON.parse(e))},error:e=>{console.log(e)}})};return(0,r.useEffect)((()=>{e.ajax({dataType:"json",method:"POST",url:mobbexWidget.sourcesUrl,data:{ids:mobbexWidget.product_ids,price:mobbexWidget.price},success:e=>{o(JSON.parse(e)),n(!0)},error:e=>{console.log(e)}}),e(document).on("found_variation","form.cart",(function(e,t){i(t.display_price,t.variation_id)})),e(document).on("wc-composite-component-loaded","form.cart",((e,t)=>{let o=t.composite.composite_price_view.model.attributes.totals.price;i(o,t.composite.composite_id,!1)}))}),[]),"embed"===mobbexWidget.type?(0,r.createElement)(h,{sources:t,theme:mobbexWidget.theme,ready:a}):(0,r.createElement)(c,{disable:!a,sources:t,text:mobbexWidget.text,logo:mobbexWidget.logo,theme:mobbexWidget.theme})}t(document).ready(async function(){let e=0;do{await new Promise((e=>setTimeout(e,100))),e++}while(!document.querySelector("#mbbxFinanceWidget")||e>50);const n=document.querySelector("#mbbxFinanceWidget");if(!n)return console.error("Mobbex widget container not found");o(n).render((0,r.createElement)(a,{$:t}))}())}(window,jQuery)})();